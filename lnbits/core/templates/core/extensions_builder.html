{% if not ajax %} {% extends "base.html" %} {% endif %}
<!---->
{% from "macros.jinja" import window_vars with context %}
<!---->
{% block scripts %} {{ window_vars(user) }}{% endblock %} {% block page %}

<div class="row">
  <div class="col-12">
    <q-stepper
      v-model="step"
      ref="stepper"
      color="primary"
      animated
      class="q-pt-sm"
    >
      <q-step
        :name="0"
        title="Intro"
        icon="home"
        :done="step > 0"
        style="min-height: 100px"
      >
        <div class="row">
          <div class="col-12">
            <span>
              In order to better understand the terms used by the
              <q-badge>Extension Builder</q-badge> we are going to use the
              <q-badge outline>Campaign Donations Extension</q-badge> as an
              example.
            </span>
          </div>
          <div class="col-12">
            <span>The story is like this:</span>
            <ul>
              <li>
                An LNbits user wants to create a campaign to receive donations
                for a cause.
              </li>
              <li>
                The user creates a campaign with a name, description, goal
                amount and a deadline (it can create multiple campaigns).
              </li>
              <li>
                The user can share the campaign link with others to receive
                donations.
              </li>
              <li>
                People can donate to the campaign and view the total amount
                received using a public page (no need to login).
              </li>
              <li>
                Donors can leave their nostr nip5 indentifier and be notified
                when their payment has been processed.
              </li>
              <li>
                The user can view the list of donors and the amounts they
                donated.
              </li>
            </ul>
          </div>
          <div class="col-12">
            <span>
              In the following steps the
              <q-badge outline>Campaign Donations</q-badge> fields will be used
              as placeholders for the <code>inputs</code> in order to guide
              you.</span
            >
            <strong>You must fill in your own values.</strong>
          </div>
        </div>
      </q-step>

      <q-step
        :name="1"
        title="Describe"
        icon="info"
        :done="step > 1"
        style="min-height: 100px"
      >
        <div class="row q-col-gutter-md">
          <div class="col-md-8 col-sm-12">
            <q-img
              :src="'{{ static_url_for('static', 'images/builder/build_01.png') }}'"
            ></q-img>
          </div>
          <div class="col-md-4 col-sm-12">
            <span>
              Tell us soomething about your extensions. This is the first step,
              you can return and change it.
            </span>
          </div>
        </div>
        <q-separator class="q-mt-sm"></q-separator>
        <div class="row q-col-gutter-md q-mt-md">
          <div class="col-md-4 col-sm-12">
            <q-input
              filled
              label="Campaign Donations"
              hint="The name of your extension"
            >
            </q-input>
          </div>
          <div class="col-md-4 col-sm-12">
            <q-input
              filled
              label="campaigns"
              hint="The ID of your extension. Lowercase letters, numbers, and underscores only (snake_case)."
            >
            </q-input>
          </div>
          <div class="col-md-4 col-sm-12">
            <q-input
              filled
              label="Track, manage, and analyze donations for any fundraising campaign easily."
              hint="A brief description that is shown in the extension list."
            >
            </q-input>
          </div>
        </div>
        <div class="row q-mt-lg">
          <div class="col-12">
            <q-input
              filled
              label="Description"
              hint="A detailed description of your extension."
              type="textarea"
              rows="3"
              maxlength="1000"
            >
            </q-input>
          </div>
        </div>
      </q-step>

      <q-step
        :name="2"
        title="Settings"
        icon="settings"
        :done="step > 2"
        style="min-height: 100px"
      >
        <div class="row q-col-gutter-md q-mt-md">
          <div class="col-md-8 col-sm-12">
            <q-img
              :src="'{{ static_url_for('static', 'images/builder/build_02.png') }}'"
            ></q-img>
          </div>
          <div class="col-md-4 col-sm-12">
            <q-toggle
              v-model="generate.settings"
              label="Generate Settings Fields"
              size="md"
              color="green"
            />
            <br />
            <span
              >Define what settings your extension will have. You can choose if
              each user has its own settings or if these are global settings set
              by the admin.
            </span>
          </div>
        </div>

        <q-separator v-if="generate.settings" class="q-mt-sm"></q-separator>
        <div v-if="generate.settings" class="row q-mt-lg">
          <div class="col-md-2 col-sm-12">
            <q-select
              filled
              dense
              emit-value
              map-options
              v-model="settingsType"
              :options="settingsTypes"
            ></q-select>
          </div>
          <div class="col-md-10 col-sm-12 q-pt-sm">
            <span v-if="settingsType === 'user'" class="text-caption q-ml-md"
              >Each user can set their own settings for this extension</span
            >
            <span v-else class="text-caption q-ml-md"
              >These settings are set by the admin and apply to all users of the
              extension</span
            >
          </div>
        </div>
        <div v-if="generate.settings" class="row q-mt-lg">
          <div class="col-12">
            <lnbits-data-fields
              :fields="settingsFields"
              :hide-advanced="true"
            ></lnbits-data-fields>
          </div>
        </div>
      </q-step>

      <q-step
        :name="3"
        :done="step > 3"
        title="Owner Data"
        icon="list"
        style="min-height: 100px"
      >
        <div class="row q-col-gutter-md q-mt-md">
          <div class="col-md-8 col-sm-12">
            <q-img
              :src="'{{ static_url_for('static', 'images/builder/build_03.png') }}'"
            ></q-img>
          </div>
          <div class="col-md-4 col-sm-12">
            <q-toggle
              v-model="generate.owner"
              label="Generate Owner Fields"
              size="md"
              color="green"
            />
            <br />
            <span>
              The owner of the extension manages this data. It can create,
              update and delete it.</span
            >
          </div>
        </div>
        <q-separator v-if="generate.owner" class="q-mt-sm"></q-separator>
        <div v-if="generate.owner" class="row q-mt-lg">
          <div class="col-12">
            <lnbits-data-fields :fields="ownerFields"></lnbits-data-fields>
          </div>
        </div>
      </q-step>

      <q-step
        :name="4"
        :done="step > 4"
        title="Customer Data"
        icon="blur_linear"
        style="min-height: 100px"
      >
        <div class="row q-col-gutter-md q-mt-md">
          <div class="col-md-8 col-sm-12">
            <q-img
              :src="'{{ static_url_for('static', 'images/builder/build_04.png') }}'"
            ></q-img>
          </div>
          <div class="col-md-4 col-sm-12">
            <q-toggle
              v-model="generate.customer"
              label="Generate Customer Fields"
              size="md"
              color="green"
            />
            <br />
            <span>
              This data is created by users of the extension. Usually when they
              submit a form or make a payment.</span
            ><br />
            <span>
              The owner of the extension can view this data, but should not
              modify it.
            </span>
          </div>
        </div>
        <q-separator v-if="generate.customer" class="q-mt-sm"></q-separator>
        <div v-if="generate.customer" class="row q-mt-lg">
          <div class="col-12">
            <lnbits-data-fields :fields="customerFields"></lnbits-data-fields>
          </div>
        </div>
      </q-step>

      <q-step
        :name="5"
        :done="step > 5"
        title="Public Pages"
        icon="link"
        style="min-height: 100px"
      >
        Try out different ad text to see what brings in the most customers, and
        learn how to enhance your ads using features like ad extensions. If you
        run into any problems with your ads, find out how to tell if they're
        running and how to resolve approval issues.
      </q-step>
      <q-step
        :name="6"
        :done="step > 6"
        title="Review"
        icon="how_to_reg"
        style="min-height: 100px"
      >
        Try out different ad text to see what brings in the most customers, and
        learn how to enhance your ads using features like ad extensions. If you
        run into any problems with your ads, find out how to tell if they're
        running and how to resolve approval issues.
      </q-step>
      <q-step
        :name="7"
        :done="step > 7"
        title="Publish"
        icon="publish"
        style="min-height: 100px"
      >
        Try out different ad text to see what brings in the most customers, and
        learn how to enhance your ads using features like ad extensions. If you
        run into any problems with your ads, find out how to tell if they're
        running and how to resolve approval issues.
      </q-step>

      <template v-slot:navigation>
        <q-separator></q-separator>
        <div class="row">
          <div class="col q-pr-md q-pb-md">
            <q-stepper-navigation class="float-right">
              <q-btn
                v-if="step > 0"
                flat
                color="grey-8"
                class="q-mr-sm"
                @click="$refs.stepper.previous()"
                label="Back"
              />

              <q-btn
                @click="$refs.stepper.next()"
                color="primary"
                :label="step === 7 ? 'Finish' : 'Next'"
              />
            </q-stepper-navigation>
          </div>
        </div>
      </template>
      <template v-slot:message>
        <q-banner v-if="step === 0" class="bg-grey-8 text-white q-px-lg">
          <span class="text-h5">New LNbits Extension</span><br />
          <span class="text-caption">
            This is a step-by-step guide to help you build your own LNbits
            extension.
          </span>
        </q-banner>
      </template>
    </q-stepper>
  </div>
</div>
<div class="row q-col-gutter-md"></div>
{% endblock %}
