{
    "funding_sources": {
        "breez": {
            "skip": true,
            "wallet_class": "BreezSdkWallet",
            "settings": {
                "breez_api_key": "100",
                "breez_greenlight_seed": "push divert icon era bracket fade much kind reason injury suffer muffin",
                "breez_greenlight_device_key": "tests/wallets/certificates/cert.pem",
                "breez_greenlight_device_cert": "tests/wallets/certificates/breez.crt"
            }
        },
        "corelightning": {
            "wallet_class": "CoreLightningWallet",
            "settings": {
                "corelightning_rpc": "some-mock-value"
            }
        },
        "lndrpc": {
            "wallet_class": "LndWallet",
            "settings": {
                "lnd_grpc_endpoint": "127.0.0.1",
                "lnd_grpc_port": "10009",
                "lnd_grpc_cert": "tests/wallets/fixtures/certificates/breez.crt",
                "lnd_grpc_macaroon": "eNcRyPtEdMaCaRoOn"
            }
        }
    },
    "functions": {
        "pay_invoice": {
            "mocks": {
                "breez": {
                    "sdk_services": {
                        "method": "breez_sdk.connect",
                        "request_type": "function"
                    }
                },
                "corelightning": {
                    "ln": {
                        "method": "pyln.client.LightningRpc.__new__",
                        "request_type": "function",
                        "response_type": "data",
                        "response": {
                            "help": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "help": [
                                        {
                                            "command": "some command"
                                        }
                                    ]
                                }
                            },
                            "listinvoices": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "invoices": []
                                }
                            },
                            "listpays": {
                                "description": "no data, pending",
                                "request_type": "function",
                                "response_type": "json",
                                "response": {}
                            }
                        }
                    }
                },
                "lndrpc": {
                    "rpc": {
                        "method": "lnbits.wallets.lnd_grpc_files.lightning_pb2_grpc.LightningStub.__new__",
                        "request_type": "function",
                        "response_type": "data",
                        "response": {}
                    },
                    "routerpc": {
                        "method": "lnbits.wallets.lnd_grpc_files.router_pb2_grpc.RouterStub.__new__",
                        "request_type": "function",
                        "response_type": "data",
                        "response": {}
                    }
                }
            },
            "tests": [
                {
                    "description": "success",
                    "call_params": {
                        "bolt11": "lnbc210n1pjlgal5sp5xr3uwlfm7ltumdjyukhys0z2rw6grgm8me9k4w9vn05zt9svzzjspp5ud2jdfpaqn5c2k2vphatsjypfafyk8rcvkvwexnrhmwm94ex4jtqdqu24hxjapq23jhxapqf9h8vmmfvdjscqpjrzjqta942048v7qxh5x7pxwplhmtwfl0f25cq23jh87rhx7lgrwwvv86r90guqqnwgqqqqqqqqqqqqqqpsqyg9qxpqysgqylngsyg960lltngzy90e8n22v4j2hvjs4l4ttuy79qqefjv8q87q9ft7uhwdjakvnsgk44qyhalv6ust54x98whl3q635hkwgsyw8xgqjl7jwu",
                        "fee_limit_msat": 25000
                    },
                    "expect": {
                        "error_message": null,
                        "success": true,
                        "checking_id": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                        "fee_msat": 50,
                        "preimage": "0000000000000000000000000000000000000000000000000000000000000000"

                    },
                    "mocks": {
                        "breez": {
                            "sdk_services": [
                                {
                                    "response_type": "data",
                                    "response": {
                                        "send_payment": {
                                            "request_type": "function",
                                            "response_type": "data",
                                            "response": {
                                                "status": {
                                                    "value": 2
                                                },
                                                "fee_msat": 50,
                                                "details": {
                                                    "data": {
                                                        "payment_preimage": "0000000000000000000000000000000000000000000000000000000000000000"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        },
                        "corelightning": {
                            "ln": [
                                {
                                    "response": {
                                        "call": {
                                            "description": "indirect call to `pay` (via `call`)",
                                            "request_type": "function",
                                            "request_data": {
                                                "args": [
                                                    "pay",
                                                    {
                                                        "bolt11": "lnbc210n1pjlgal5sp5xr3uwlfm7ltumdjyukhys0z2rw6grgm8me9k4w9vn05zt9svzzjspp5ud2jdfpaqn5c2k2vphatsjypfafyk8rcvkvwexnrhmwm94ex4jtqdqu24hxjapq23jhxapqf9h8vmmfvdjscqpjrzjqta942048v7qxh5x7pxwplhmtwfl0f25cq23jh87rhx7lgrwwvv86r90guqqnwgqqqqqqqqqqqqqqpsqyg9qxpqysgqylngsyg960lltngzy90e8n22v4j2hvjs4l4ttuy79qqefjv8q87q9ft7uhwdjakvnsgk44qyhalv6ust54x98whl3q635hkwgsyw8xgqjl7jwu",
                                                        "description": "Unit Test Invoice",
                                                        "exemptfee": 0,
                                                        "maxfeepercent": "119.04761905"
                                                    }
                                                ]
                                            },
                                            "response_type": "json",
                                            "response": {
                                                "amount_sent_msat": 21000,
                                                "amount_msat": 21050,
                                                "payment_hash": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                                                "payment_preimage": "0000000000000000000000000000000000000000000000000000000000000000"
                                            }
                                        }
                                    }
                                }
                            ]
                        },
                        "lndrpc": {
                            "rpc": [],
                            "routerpc": [
                                {
                                    "description": "use router",
                                    "response": {
                                        "SendPaymentV2": {
                                            "request_type": "function",
                                            "response_type": "function",
                                            "response": {
                                                "read": {
                                                    "request_type": "async-function",
                                                    "response_type": "data",
                                                    "response": {
                                                        "status": 2,
                                                        "htlcs": [{"route": {"total_fees_msat": -51}}],
                                                        "payment_preimage":"0000000000000000000000000000000000000000000000000000000000000000",
                                                        "payment_hash":"e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            ]
        }
    }
}
