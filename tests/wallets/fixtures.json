{
    "corelightningrest": {
        "class": "CoreLightningRestWallet",
        "settings": {
            "corelightning_rest_url": "http://127.0.0.1:8555",
            "corelightning_rest_macaroon": "eNcRyPtEdMaCaRoOn"
        },
        "api": {
            "status": {
                "server": {
                    "uri": "/v1/channel/localremotebal",
                    "headers": {
                        "macaroon": "eNcRyPtEdMaCaRoOn",
                        "encodingtype": "hex",
                        "accept": "application/json",
                        "User-Agent": "LNbits/0.12.2"
                    },
                    "method": "GET"
                },
                "tests": [
                    {
                        "description": "no balance",
                        "response_type": "json",
                        "server_response": {},
                        "expect": {
                            "error_message": "no data",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "with balance",
                        "response_type": "json",
                        "server_response": {
                            "localBalance": 55
                        },
                        "expect": {
                            "error_message": null,
                            "balance_msat": 55000
                        }
                    },
                    {
                        "description": "with error",
                        "response_type": "json",
                        "server_response": {
                            "error": "test-error"
                        },
                        "expect": {
                            "error_message": "Failed to connect to http://127.0.0.1:8555, got: 'test-error...'",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "with bad json",
                        "response_type": "json",
                        "server_response": "test-text-error",
                        "expect": {
                            "error_message": "Failed to connect to http://127.0.0.1:8555, got: '\"test-text-error\"...'",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "http 404",
                        "response_type": "response",
                        "server_response": {
                            "response": "Not Found",
                            "status": 404
                        },
                        "expect_error": {
                            "module": "httpx",
                            "class": "HTTPStatusError",
                            "message": "Client error '404 NOT FOUND'"
                        }
                    }
                ]
            },
            "create_invoice": {
                "server": {
                    "uri": "/v1/invoice/genInvoice",
                    "headers": {
                        "macaroon": "eNcRyPtEdMaCaRoOn",
                        "encodingtype": "hex",
                        "accept": "application/json",
                        "User-Agent": "LNbits/0.12.2"
                    },
                    "method": "POST"
                },
                "tests": [
                    {
                        "description": "ok",
                        "params": {
                            "amount": 555,
                            "memo": "Test Invoice",
                            "label": "test-label"
                        },
                        "data": {
                            "amount": 555000,
                            "description": "Test Invoice",
                            "label": "test-label"
                        },
                        "response_type": "json",
                        "server_response": {
                            "payment_hash": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                            "bolt11": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n"
                        },
                        "expect": {
                            "success": true,
                            "checking_id": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                            "payment_request": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n",
                            "error_message": null
                        }
                    }
                ]
            }
        }
    },
    "lnrest": {
        "class": "LndRestWallet",
        "settings": {
            "lnd_rest_endpoint": "http://127.0.0.1:8555",
            "lnd_rest_macaroon": "eNcRyPtEdMaCaRoOn",
            "lnd_rest_cert": ""
        },
        "api": {
            "status": {
                "server": {
                    "uri": "/v1/balance/channels",
                    "headers": {
                        "Grpc-Metadata-macaroon": "eNcRyPtEdMaCaRoOn",
                        "User-Agent": "LNbits/0.12.2"
                    },
                    "method": "GET"
                },
                "tests": [
                    {
                        "description": "no balance",
                        "response_type": "json",
                        "server_response": {},
                        "expect": {
                            "error_message": "{}",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "with balance",
                        "response_type": "json",
                        "server_response": {
                            "balance": 55
                        },
                        "expect": {
                            "error_message": null,
                            "balance_msat": 55000
                        }
                    },
                    {
                        "description": "with error",
                        "response_type": "json",
                        "server_response": {
                            "error": "no balance key"
                        },
                        "expect": {
                            "error_message": "{\n    \"error\": \"no balance key\"\n}",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "with bad json #todo: respond with data",
                        "response_type": "json",
                        "server_response": "test-text-error",
                        "expect": {
                            "error_message": "\"test-text-error\"",
                            "balance_msat": 0
                        }
                    },
                    {
                        "description": "http 404",
                        "response_type": "response",
                        "server_response": {
                            "response": "Not Found",
                            "status": 404
                        },
                        "expect_error": {
                            "module": "httpx",
                            "class": "HTTPStatusError",
                            "message": "Client error '404 NOT FOUND'"
                        }
                    }
                ]
            },
            "create_invoice": {
                "server": {
                    "uri": "/v1/invoices",
                    "headers": {
                        "Grpc-Metadata-macaroon": "eNcRyPtEdMaCaRoOn",
                        "User-Agent": "LNbits/0.12.2"
                    },
                    "method": "POST"
                },
                "tests": [
                    {
                        "description": "ok #todo base64 checking_id",
                        "params": {
                            "amount": 555,
                            "memo": "Test Invoice",
                            "label": "test-label"
                        },
                        "json": {
                            "value": 555,
                            "memo": "Test Invoice",
                            "private": true
                        },
                        "response_type": "json",
                        "server_response": {
                            "r_hash": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                            "payment_request": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n"
                        },
                        "expect": {
                            "success": true,
                            "checking_id": "7b7e79dba6b8dddd387bdf39e7de1cd1d7da6fce3cf35e1fe76e1bd5cefceb9f7c79cf5aeb76de75d6f677bdba69cf7a",
                            "payment_request": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n",
                            "error_message": null
                        }
                    }
                ]
            }
        }
    }
}
